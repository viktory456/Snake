<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Snake Game</title>
    <style>
        #gameBox {
            width: 800px;
            height: 800px;
            background-color: antiquewhite;
            display: flex;
            flex-wrap: wrap;
        }
        .cell {
            width: 80px;
            height: 80px;
            text-align: center;
            line-height: 80px;
            /* outline: 1px solid green; */
            font-size: 75px;
        }
    </style>
</head>
<body>
    <div id="gameBox">
        <div class="cell" data-key="00" id="00"></div>
        <div class="cell" data-key="01" id="01"></div>
        <div class="cell" data-key="02" id="02"></div>
        <div class="cell" data-key="03" id="03"></div>
        <div class="cell" data-key="04" id="04"></div>
        <div class="cell" data-key="05" id="05"></div>
        <div class="cell" data-key="06" id="06"></div>
        <div class="cell" data-key="07" id="07"></div>
        <div class="cell" data-key="08" id="08"></div>
        <div class="cell" data-key="09" id="09"></div>
        <div class="cell" data-key="10" id="10"></div>
        <div class="cell" data-key="11" id="11"></div>
        <div class="cell" data-key="12" id="12"></div>
        <div class="cell" data-key="13" id="13"></div>
        <div class="cell" data-key="14" id="14"></div>
        <div class="cell" data-key="15" id="15"></div>
        <div class="cell" data-key="16" id="16"></div>
        <div class="cell" data-key="17" id="17"></div> 
        <div class="cell" data-key="18" id="18"></div>
        <div class="cell" data-key="19" id="19"></div>
        <div class="cell" data-key="20" id="20"></div>
        <div class="cell" data-key="21" id="21"></div>
        <div class="cell" data-key="22" id="22"></div>
        <div class="cell" data-key="23" id="23"></div>
        <div class="cell" data-key="24" id="24"></div>
        <div class="cell" data-key="25" id="25"></div>
        <div class="cell" data-key="26" id="26"></div>
        <div class="cell" data-key="27" id="27"></div>
        <div class="cell" data-key="28" id="28"></div>
        <div class="cell" data-key="29" id="29"></div> 
        <div class="cell" data-key="30" id="30"></div>
        <div class="cell" data-key="31" id="31"></div>
        <div class="cell" data-key="32" id="32"></div>
        <div class="cell" data-key="33" id="33"></div>
        <div class="cell" data-key="34" id="34"></div>
        <div class="cell" data-key="35" id="35"></div>
        <div class="cell" data-key="36" id="36"></div>
        <div class="cell" data-key="37" id="37"></div>
        <div class="cell" data-key="38" id="38"></div>
        <div class="cell" data-key="39" id="39"></div> 
        <div class="cell" data-key="40" id="40"></div>
        <div class="cell" data-key="41" id="41"></div>
        <div class="cell" data-key="42" id="42"></div>
        <div class="cell" data-key="43" id="43"></div>
        <div class="cell" data-key="44" id="44"></div>
        <div class="cell" data-key="45" id="45"></div>
        <div class="cell" data-key="46" id="46"></div>
        <div class="cell" data-key="47" id="47"></div>
        <div class="cell" data-key="48" id="48"></div>
        <div class="cell" data-key="49" id="49"></div>
        <div class="cell" data-key="50" id="50"></div>
        <div class="cell" data-key="51" id="51"></div>
        <div class="cell" data-key="52" id="52"></div>
        <div class="cell" data-key="53" id="53"></div>
        <div class="cell" data-key="54" id="54"></div>
        <div class="cell" data-key="55" id="55"></div>
        <div class="cell" data-key="56" id="56"></div>
        <div class="cell" data-key="57" id="57"></div>
        <div class="cell" data-key="58" id="58"></div>
        <div class="cell" data-key="59" id="59"></div> 
        <div class="cell" data-key="60" id="60"></div>
        <div class="cell" data-key="61" id="61"></div>
        <div class="cell" data-key="62" id="62"></div>
        <div class="cell" data-key="63" id="63"></div>
        <div class="cell" data-key="64" id="64"></div>
        <div class="cell" data-key="65" id="65"></div>
        <div class="cell" data-key="66" id="66"></div>
        <div class="cell" data-key="67" id="67"></div>
        <div class="cell" data-key="68" id="68"></div>
        <div class="cell" data-key="69" id="69"></div> 
        <div class="cell" data-key="70" id="70"></div>
        <div class="cell" data-key="71" id="71"></div>
        <div class="cell" data-key="72" id="72"></div>
        <div class="cell" data-key="73" id="73"></div>
        <div class="cell" data-key="74" id="74"></div>
        <div class="cell" data-key="75" id="75"></div>
        <div class="cell" data-key="76" id="76"></div>
        <div class="cell" data-key="77" id="77"></div>
        <div class="cell" data-key="78" id="78"></div>
        <div class="cell" data-key="79" id="79"></div>
        <div class="cell" data-key="80" id="80"></div>
        <div class="cell" data-key="81" id="81"></div>
        <div class="cell" data-key="82" id="82"></div>
        <div class="cell" data-key="83" id="83"></div>
        <div class="cell" data-key="84" id="84"></div>
        <div class="cell" data-key="85" id="85"></div>
        <div class="cell" data-key="86" id="86"></div>
        <div class="cell" data-key="87" id="87"></div>
        <div class="cell" data-key="88" id="88"></div>
        <div class="cell" data-key="89" id="89"></div> 
        <div class="cell" data-key="90" id="90"></div>
        <div class="cell" data-key="91" id="91"></div>
        <div class="cell" data-key="92" id="92"></div>
        <div class="cell" data-key="93" id="93"></div>
        <div class="cell" data-key="94" id="94"></div>
        <div class="cell" data-key="95" id="95"></div>
        <div class="cell" data-key="96" id="96"></div>
        <div class="cell" data-key="97" id="97"></div>
        <div class="cell" data-key="98" id="98"></div>
        <div class="cell" data-key="99" id="99"></div>
    </div>
    <script>
      function Game (){
        const cells = document.querySelectorAll('.cell')
        var coordinateX = Math.floor(Math.random()*10)
        var coordinateY = Math.floor(Math.random()*10)
        var coordinates = [coordinateX.toString(), coordinateY.toString()].join('')
        var snakeCoordinates = [coordinates]
        cells.forEach(function (item) {
            if(item.dataset.key === coordinates){
                item.innerText = '游릴';
            };
        });

        const createFood = () => {
            const availableCells = []
            cells.forEach(function(item) {
                for(let i=0; i<snakeCoordinates.length; i++){
                    if(item.dataset.key != snakeCoordinates[i] && item.innerText !== '游릴'){
                        availableCells.push(item.dataset.key)
                    }
                }
            })
            var foodCoordinatesIndex = Math.floor(Math.random()*availableCells.length)
            var foodCoordinates = availableCells[foodCoordinatesIndex]
            cells.forEach(function(item) {
                if(item.dataset.key === foodCoordinates){
                    item.innerText = '游꼝'
                }
            })
        }
        createFood();
        const changeCoordinates = (keyName) => {
            if(keyName === 'ArrowUp'){
                coordinateX -= 1
                if(coordinateX < 0){
                    return alert('Game over')
                }
            } else if(keyName === 'ArrowDown'){
                coordinateX += 1
                if(coordinateX > 9){
                    return alert('Game over')
                }
            } else if(keyName === 'ArrowRight'){
                coordinateY += 1
                if(coordinateY > 9){
                    return alert('Game over')
                }
            } else {
                coordinateY -= 1
                if(coordinateY < 0){
                    return alert('Game over')
                }
            }
            coordinates = [coordinateX.toString(), coordinateY.toString()].join('')
            snakeCoordinates.push(coordinates)
        }

        document.addEventListener('keydown', (event) => {
            var food;
            cells.forEach(function (item) {
                if(item.innerText === '游꼝'){
                    food = item.dataset.key;
                }}); 
            var keyName = event.key;
            // const timer = () => setInterval(changeCoordinates(keyName), 1000)
            // timer()
            changeCoordinates(keyName);
                cells.forEach(function (item) {
                    if(item.innerText === '游릴' && item.dataset.key === coordinates){
                        return alert('Game over')
                }}); 
                if(coordinates === food){
                    for (const entry of cells.entries()) {
                        if(entry[1].id === coordinates){
                            entry[1].innerText = '游릴'
                    }}
                    if(snakeCoordinates.length === 30){
                        return alert('Win!')
                    }
                    createFood();
                } else {
                    snakeCoordinates = snakeCoordinates.slice(1)
                    cells.forEach(function(item) {
                        item.innerText = ''
                    })
                    cells.forEach(function (item) {
                        for(let i = 0; i<snakeCoordinates.length; i++){
                            if(item.dataset.key === snakeCoordinates[i]){
                                item.innerText = '游릴';
                    }}});
                    cells.forEach(function (item) {
                        if(item.dataset.key === food){
                        item.innerText = '游꼝';
                    }}); 
                }
         }, false);
         



}

Game()
    </script>
</body>
</html>